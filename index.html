
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link rel="stylesheet" type="text/css" href="_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>Overview &#8212; Hades 0.4.0-180-g86b2a9b documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/guzzle.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Components" href="components.html" />
  
   

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="components.html" title="Components"
             accesskey="N">next</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">Hades 0.4.0-180-g86b2a9b documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Overview</a></li> 
      </ul>
    </div>
    <div class="container-wrapper">

      <div id="mobile-toggle">
        <a href="#"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></a>
      </div>
  <div id="left-column">
    <div class="sphinxsidebar">
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>Table Of Contents</h2>
  </div>
  <div class="sidebar-toc">
    
    
      <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="components.html">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="networking.html">Networking</a></li>
<li class="toctree-l1"><a class="reference internal" href="replication.html">Replication</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="alternative-dns.html">Alternative DNS</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">CLI Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/hades.html">Code Documentation</a></li>
</ul>

    
  </div>
</div>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <div id="main-search">
      <form class="form-inline" action="search.html" method="GET" role="form">
        <div class="input-group">
          <input name="q" type="text" class="form-control" placeholder="Search...">
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div>
      
    </div>
  </div>
        <div id="right-column">
          
          <div role="navigation" aria-label="breadcrumbs navigation">
            <ol class="breadcrumb">
              <li><a href="#">Docs</a></li>
              
              <li>Overview</li>
            </ol>
          </div>
          
          <div class="document clearer body">
            
  <section id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<p>Hades is the authentication and authorization system of the AG DSN residential
network/student network.
It is a distributed system that provides RADIUS MAC authentication (also called
MAC Authentication Bypass on Cisco devices) to authenticate users via switches
that support it and offers the most essential networking services, DHCP and DNS,
for authenticated users.
Hades includes a basic captive portal that explains to unauthenticated users why
their authentication attempt failed.</p>
<p>External services may be integrated into the captive portal to e.g. allow user
to login with user account into a user management interface, a web mail
interface, or sign up via a web interface.</p>
<section id="table-of-contents">
<h2>Table of Contents<a class="headerlink" href="#table-of-contents" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="components.html">Components</a><ul>
<li class="toctree-l2"><a class="reference internal" href="components.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="components.html#database-postgresql">Database (PostgreSQL)</a></li>
<li class="toctree-l2"><a class="reference internal" href="components.html#radius-freeradius">RADIUS (FreeRADIUS)</a></li>
<li class="toctree-l2"><a class="reference internal" href="components.html#auth-dns-unbound">Auth DNS (unbound)</a></li>
<li class="toctree-l2"><a class="reference internal" href="components.html#auth-dhcp-dnsmasq">Auth DHCP (dnsmasq)</a></li>
<li class="toctree-l2"><a class="reference internal" href="components.html#unauth-dns-dnsmasq">Unauth DNS (dnsmasq)</a></li>
<li class="toctree-l2"><a class="reference internal" href="components.html#unauth-dhcp-dnsmasq">Unauth DHCP (dnsmasq)</a></li>
<li class="toctree-l2"><a class="reference internal" href="components.html#site-agent-celery">Site Agent (Celery)</a></li>
<li class="toctree-l2"><a class="reference internal" href="components.html#deputy-dbus">Deputy (DBus)</a></li>
<li class="toctree-l2"><a class="reference internal" href="components.html#vrrp-keepalived">VRRP (keepalived)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="networking.html">Networking</a><ul>
<li class="toctree-l2"><a class="reference internal" href="networking.html#network-namespaces">Network Namespaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#vlan-transitions">VLAN Transitions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="replication.html">Replication</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#syntax">Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#templates">Templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#options-reference">Options Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="alternative-dns.html">Alternative DNS</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">CLI Utilities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cli.html#hades-agent">hades-agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#hades-check-database">hades-check-database</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#hades-deputy">hades-deputy</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#hades-export-options">hades-export-options</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#hades-generate-config">hades-generate-config</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#hades-vrrp-notify">hades-vrrp-notify</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="development.html#docker-setup">Docker Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="development.html#building-the-documentation">Building the Documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api/hades.html">Code Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api/hades.html#subpackages">Subpackages</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/hades.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/hades.html#hades-constants-module">hades.constants module</a></li>
</ul>
</li>
</ul>
</div>
</section>
<section id="goals">
<h2>Goals<a class="headerlink" href="#goals" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Authenticate users without requiring any special software on the user side</p></li>
<li><p>Provide DNS and DHCP for authenticated users</p></li>
<li><p>Show an error page to unauthenticated users</p></li>
<li><p>Support a whitelist of domains, that unauthenticated users can access</p></li>
<li><p>Fault-Tolerance</p></li>
<li><p>Isolate unauthenticated users properly from the rest of the network</p></li>
</ul>
</section>
<section id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<section id="debian">
<h3>Debian<a class="headerlink" href="#debian" title="Permalink to this headline">¶</a></h3>
<p>Hades was developed specifically for deployment on Debian.
In principle, Hades can run on any other Linux distribution,
but there was no need and more importantly no time to test this.
On the other hand, Hades provides native Debian packages that integrate nicely.</p>
<p>Hades provides a configure script, that determines all platform-specific paths,
so porting it to a different distribution.</p>
<p>For details, see <a class="reference internal" href="development.html#development"><span class="std std-ref">Development</span></a>.</p>
</section>
<section id="systemd">
<h3>systemd<a class="headerlink" href="#systemd" title="Permalink to this headline">¶</a></h3>
<p>Hades makes use of systemd.
Obviously systemd is used to start, stop, reload the various services of Hades
and ensure start-up order and dependencies.
Every decent init system does that.</p>
<p>Hades however uses some more advanced features,
which other init systems might not provide:</p>
<ul class="simple">
<li><p>Systemd, among other things, is used by keepalived to check the health status of
other hades services.</p></li>
<li><p>Network namespaces are created through systemd and <code class="docutils literal notranslate"><span class="pre">ip</span> <span class="pre">netns</span></code>.</p></li>
<li><p>Periodic tasks are implemented through systemd timers.</p></li>
</ul>
<p>Again, in principle all of this could be made to work without systemd, but there
was neither the need, nor the time to do that.</p>
</section>
<section id="python">
<h3>Python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h3>
<p>At least Python 3.5 is currently required to run Hades.</p>
</section>
</section>
<section id="building">
<h2>Building<a class="headerlink" href="#building" title="Permalink to this headline">¶</a></h2>
<p>The easiest way to build Hades is using <a class="reference external" href="https://www.docker.com/">Docker</a>:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>docker-compose build --build-arg<span class="o">=</span><span class="nv">UID</span><span class="o">=</span><span class="k">$(</span>id -u<span class="k">)</span> --build-arg<span class="o">=</span><span class="nv">GID</span><span class="o">=</span><span class="k">$(</span>id -g<span class="k">)</span>
<span class="gp">$ </span>docker-compose run --user builder --rm build.sh
</pre></div>
</div>
</div></blockquote>
<p>The first command will build an image for development purposes.
The UID and GID build arguments ensure that the user, that is created within the
container has the same UID and GID as your current user.</p>
<p>The second command will start an ephemeral container, that mounts the project
directory and the build subdirectory into the container and builds the Debian
packages.</p>
<p>Afterwards you can find the Debian packages under <code class="docutils literal notranslate"><span class="pre">./build</span></code>:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ls -1 ./build
<span class="go">arpreq_0.3.3-1_all.deb</span>
<span class="go">arpreq_0.3.3-1_amd64.buildinfo</span>
<span class="go">arpreq_0.3.3-1_amd64.changes</span>
<span class="go">hades</span>
<span class="go">hades_0.4.0_amd64.buildinfo</span>
<span class="go">hades_0.4.0_amd64.changes</span>
<span class="go">hades_0.4.0_amd64.deb</span>
<span class="go">python3-arpreq_0.3.3-1_all.deb</span>
<span class="go">python-arpreq</span>
<span class="go">python-arpreq_0.3.3-1_all.deb</span>
</pre></div>
</div>
</div></blockquote>
<p>If something fails or you just want to explore the build environment, you can
start a container in detached state and launch a shell in it afterwards:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>docker-compose up -d
<span class="gp">$ </span>docker-compose <span class="nb">exec</span> --user builder bash
</pre></div>
</div>
</div></blockquote>
<p>This way, systemd will start in the docker container, so that you can install
and test Hades inside the container:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">builder@0123456789ab:/$ </span><span class="nb">cd</span> /build
<span class="gp">builder@0123456789ab:~$ </span>sudo dpkg -i python3-arpreq_0.3.3-1_all.deb
<span class="gp">builder@0123456789ab:~$ </span>sudo dpkg -i hades_0.4.0_amd64.deb
<span class="gp">builder@0123456789ab:~$ </span><span class="nb">cd</span> /build/hades
<span class="gp">builder@0123456789ab:~/hades$ </span>sudo cp tests/config.py /etc/hades
<span class="gp">builder@0123456789ab:~/hades$ </span>sudo systemctl <span class="nb">enable</span> hades.service
<span class="gp">builder@0123456789ab:~/hades$ </span>sudo systemctl start hades.service
</pre></div>
</div>
</div></blockquote>
<p>Congratulations, you've successfully started a test instance of Hades!</p>
</section>
<section id="concepts">
<h2>Concepts<a class="headerlink" href="#concepts" title="Permalink to this headline">¶</a></h2>
<section id="site-node">
<h3>Site Node<a class="headerlink" href="#site-node" title="Permalink to this headline">¶</a></h3>
</section>
<section id="asynchronous-replication">
<h3>Asynchronous Replication<a class="headerlink" href="#asynchronous-replication" title="Permalink to this headline">¶</a></h3>
</section>
</section>
<section id="indices-and-tables">
<h2>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</section>
</section>


          </div>
            
  <div class="footer-relations">
    
      <div class="pull-right">
        <a class="btn btn-default" href="components.html" title="next chapter (use the right arrow)">Components</a>
      </div>
    </div>
    <div class="clearer"></div>
  
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="components.html" title="Components"
             >next</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">Hades 0.4.0-180-g86b2a9b documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Overview</a></li> 
      </ul>
    </div>
<script type="text/javascript">
  $("#mobile-toggle a").click(function () {
    $("#left-column").toggle();
  });
</script>
<script type="text/javascript" src="_static/js/bootstrap.js"></script>
  <div class="footer">
    &copy; Copyright 2015-2020, Sebastian Schrader, Stefan Haller. Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  </body>
</html>