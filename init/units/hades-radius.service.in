[Unit]
Description=Hades RADIUS service (FreeRADIUS)
Documentation=https://agdsn.github.io/hades/
#PartOf=hades.target
After=hades-network.service hades-database.service
Wants=hades-network.service hades-database.service

[Service]
Type=forking
PIDFile=@PKGRUNSTATEDIR@/radius/radiusd.pid
SyslogIdentifier=hades-radius
Environment=PGAPPNAME=hades-radius
EnvironmentFile=@SYSTEMDENVDIR@/hades
ExecStartPre=@VENVDIR@/bin/hades-generate-config freeradius @PKGRUNSTATEDIR@/radius
ExecStartPre=@RADIUSD@ -d @PKGRUNSTATEDIR@/radius -Cx -lstdout
ExecStart=@RADIUSD@ -d @PKGRUNSTATEDIR@/radius
ExecReload=@VENVDIR@/bin/hades-generate-config freeradius @PKGRUNSTATEDIR@/radius
ExecReload=@KILL@ -HUP $MAINPID
Restart=always
RestartSec=5
